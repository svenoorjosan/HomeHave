<%- include('../partials/head') %>
  </head>

  <body class="min-h-screen bg-[#0b1220]">
    <!-- Starfield background -->
    <div id="fx-root" class="pointer-events-none fixed inset-0 z-0"></div>

    <!-- Nav above stars -->
    <header class="relative z-10 mt-10 md:mt-14">
      <%- include('../partials/nav') %>
    </header>

    <% const isEditing=typeof editing !=='undefined' && editing; const h=(typeof home !=='undefined' && home) ? home :
      {}; %>

      <!-- Dark glass card -->
      <main class="relative z-10 container mx-auto mt-8 p-8 max-w-2xl
               bg-slate-800/70 supports-[backdrop-filter]:bg-slate-800/60 backdrop-blur
               text-slate-100 rounded-lg shadow-xl ring-1 ring-white/10">
        <h1 class="text-3xl font-bold mb-6 text-center">
          <%= isEditing ? 'Edit' : 'Register' %> Your Home on HomeHave
        </h1>

        <form action="/host/<%= isEditing ? 'edit-home' : 'add-home' %>" method="POST" enctype="multipart/form-data"
          class="max-w-md mx-auto">
          <input type="hidden" name="id" value="<%= isEditing && h._id ? h._id : '' %>" />

          <input type="text" name="houseName" value="<%= h.houseName || '' %>" placeholder="Enter your House Name"
            class="w-full px-4 py-2 mb-4 rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100 placeholder-slate-300
               focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required />

          <input type="text" name="price" value="<%= h.price || '' %>" placeholder="Price Per Night" class="w-full px-4 py-2 mb-4 rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100 placeholder-slate-300
               focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required />

          <input type="text" name="location" value="<%= h.location || '' %>" placeholder="Location" class="w-full px-4 py-2 mb-4 rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100 placeholder-slate-300
               focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" required />

          <input type="text" name="rating" value="<%= h.rating || '' %>" placeholder="Rating" class="w-full px-4 py-2 mb-4 rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100 placeholder-slate-300
               focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500" />

          <input type="file" name="photo" accept="image/jpg, image/jpeg, image/png" class="w-full px-4 py-2 mb-4 rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100
               file:mr-4 file:py-2 file:px-3 file:rounded-md
               file:border-0 file:bg-slate-700 file:text-slate-100
               hover:file:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-red-500" <%=isEditing ? ''
            : 'required' %>
          />

          <textarea name="description" placeholder="Describe your home"
            class="w-full px-4 py-2 mb-4 h-32 resize-y rounded-md border border-slate-500
               bg-slate-900/40 text-slate-100 placeholder-slate-300
               focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"><%= h.description || '' %></textarea>

          <input type="submit" value="<%= isEditing ? 'Update Home' : 'Add Home' %>" class="w-full bg-gradient-to-r from-red-500 to-rose-500 text-white py-2 rounded-md
               hover:brightness-110 transition duration-300" />
        </form>
      </main>

      <!-- React + Babel (order matters) -->
      <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
      <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
      <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

      <!-- Starfield JSX (served from /public/js/Starfield.jsx) -->
      <script type="text/babel" data-presets="env,react" src="/js/Starfield.jsx"></script>
  </body>

  </html>